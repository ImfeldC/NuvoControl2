<?xml version="1.0" encoding="utf-8"?>
<!-- sAuthors: C. Imfeld, B. Limacher -->
<!-- Date: 20-Feb-2016 -->
<NuvoControl>
  <Configuration Version="2.1">
    
    <Hardware>
      <Device Id="100">
        <ProtocolDriver Name="Nuvo Essentia Protokoll Driver" AssemblyName="NuvoControl.Server.ProtocolDriver" ClassName="NuvoControl.Server.ProtocolDriver.NuvoEssentiaProtocolDriver" />
        <Communication Port="COM1" BaudRate="9600" DataBits="8" ParityBit="1" ParityMode="None" />
        <AudioDevices>
          <AudioDevice Id="1" Player="mpg321" DeviceType="alsa" Device="hw:0,0" Name="Raspberry Pi on-board" SourceId="100.6" />
          <AudioDevice Id="2" Player="mpg321" DeviceType="alsa" Device="hw:1,0" Name="(Reserve 1)" SourceId="100.5" />
          <AudioDevice Id="3" Player="mpg321" DeviceType="alsa" Device="hw:2,0" Name="(Reserve 2)" SourceId="100.4" />
        </AudioDevices>
        <OSCDevices>
          <OSCServer Id="1" Name="Server1" IPAddress="0.0.0.0"  ListenPort="8000" SendPort="9000"></OSCServer>  
          <OSCClient Id="2" Name="Client1" IPAddress="192.168.1.126" SendPort="9000" />
          <OSCClient Id="3" Name="Client2" IPAddress="192.168.1.127" SendPort="9000">
            <Zones>
              <Zone Id="1"  ZoneName="NuvoControl/ZoneName" ZoneStatus="NuvoControl/status" ZoneSourceName="" ZoneSourceSelection="NuvoControl/source" ZoneVolume="NuvoControl/volume" ZoneBass="NuvoControl/bass" ZoneTreble="NuvoControl/treble" ZoneKeyPadLock="NuvoControl/keypadlock"/>
              <Zone Id="2"  ZoneName="NuvoControl/Zone2/ZoneName"  ZoneStatus="NuvoControl/Zone2/Status"  ZoneSourceName="NuvoControl/Zone2/SourceName"  ZoneSourceSelection="NuvoControl/Zone2/SourceSelection"  ZoneVolume="NuvoControl/Zone2/Volume"  ZoneBass="NuvoControl/Zone2/Bass"  ZoneTreble="NuvoControl/Zone2/Treble"  ZoneKeyPadLock="NuvoControl/Zone2/KeyPadLock"/>
              <Zone Id="3"  ZoneName="NuvoControl/Zone3/ZoneName"  ZoneStatus="NuvoControl/Zone3/Status"  ZoneSourceName="NuvoControl/Zone3/SourceName"  ZoneSourceSelection="NuvoControl/Zone3/SourceSelection"  ZoneVolume="NuvoControl/Zone3/Volume"  ZoneBass="NuvoControl/Zone3/Bass"  ZoneTreble="NuvoControl/Zone3/Treble"  ZoneKeyPadLock="NuvoControl/Zone3/KeyPadLock"/>
              <Zone Id="4"  ZoneName="NuvoControl/Zone4/ZoneName"  ZoneStatus="NuvoControl/Zone4/Status"  ZoneSourceName="NuvoControl/Zone4/SourceName"  ZoneSourceSelection="NuvoControl/Zone4/SourceSelection"  ZoneVolume="NuvoControl/Zone4/Volume"  ZoneBass="NuvoControl/Zone4/Bass"  ZoneTreble="NuvoControl/Zone4/Treble"  ZoneKeyPadLock="NuvoControl/Zone4/KeyPadLock"/>
              <Zone Id="5"  ZoneName="NuvoControl/Zone5/ZoneName"  ZoneStatus="NuvoControl/Zone5/Status"  ZoneSourceName="NuvoControl/Zone5/SourceName"  ZoneSourceSelection="NuvoControl/Zone5/SourceSelection"  ZoneVolume="NuvoControl/Zone5/Volume"  ZoneBass="NuvoControl/Zone5/Bass"  ZoneTreble="NuvoControl/Zone5/Treble"  ZoneKeyPadLock="NuvoControl/Zone5/KeyPadLock"/>
              <Zone Id="6"  ZoneName="NuvoControl/Zone6/ZoneName"  ZoneStatus="NuvoControl/Zone6/Status"  ZoneSourceName="NuvoControl/Zone6/SourceName"  ZoneSourceSelection="NuvoControl/Zone6/SourceSelection"  ZoneVolume="NuvoControl/Zone6/Volume"  ZoneBass="NuvoControl/Zone6/Bass"  ZoneTreble="NuvoControl/Zone6/Treble"  ZoneKeyPadLock="NuvoControl/Zone6/KeyPadLock"/>
              <Zone Id="7"  ZoneName="NuvoControl/Zone7/ZoneName"  ZoneStatus="NuvoControl/Zone7/Status"  ZoneSourceName="NuvoControl/Zone7/SourceName"  ZoneSourceSelection="NuvoControl/Zone7/SourceSelection"  ZoneVolume="NuvoControl/Zone7/Volume"  ZoneBass="NuvoControl/Zone7/Bass"  ZoneTreble="NuvoControl/Zone7/Treble"  ZoneKeyPadLock="NuvoControl/Zone7/KeyPadLock"/>
              <Zone Id="8"  ZoneName="NuvoControl/Zone8/ZoneName"  ZoneStatus="NuvoControl/Zone8/Status"  ZoneSourceName="NuvoControl/Zone8/SourceName"  ZoneSourceSelection="NuvoControl/Zone8/SourceSelection"  ZoneVolume="NuvoControl/Zone8/Volume"  ZoneBass="NuvoControl/Zone8/Bass"  ZoneTreble="NuvoControl/Zone8/Treble"  ZoneKeyPadLock="NuvoControl/Zone8/KeyPadLock"/>
              <Zone Id="9"  ZoneName="NuvoControl/Zone9/ZoneName"  ZoneStatus="NuvoControl/Zone9/Status"  ZoneSourceName="NuvoControl/Zone9/SourceName"  ZoneSourceSelection="NuvoControl/Zone9/SourceSelection"  ZoneVolume="NuvoControl/Zone9/Volume"  ZoneBass="NuvoControl/Zone9/Bass"  ZoneTreble="NuvoControl/Zone9/Treble"  ZoneKeyPadLock="NuvoControl/Zone9/KeyPadLock"/>
              <Zone Id="10" ZoneName="NuvoControl/Zone10/ZoneName" ZoneStatus="NuvoControl/Zone10/Status" ZoneSourceName="NuvoControl/Zone10/SourceName" ZoneSourceSelection="NuvoControl/Zone10/SourceSelection" ZoneVolume="NuvoControl/Zone10/Volume" ZoneBass="NuvoControl/Zone10/Bass" ZoneTreble="NuvoControl/Zone10/Treble" ZoneKeyPadLock="NuvoControl/Zone10/KeyPadLock"/>
              <Zone Id="11" ZoneName="NuvoControl/Zone11/ZoneName" ZoneStatus="NuvoControl/Zone11/Status" ZoneSourceName="NuvoControl/Zone11/SourceName" ZoneSourceSelection="NuvoControl/Zone11/SourceSelection" ZoneVolume="NuvoControl/Zone11/Volume" ZoneBass="NuvoControl/Zone11/Bass" ZoneTreble="NuvoControl/Zone11/Treble" ZoneKeyPadLock="NuvoControl/Zone11/KeyPadLock"/>
              <Zone Id="12" ZoneName="NuvoControl/Zone12/ZoneName" ZoneStatus="NuvoControl/Zone12/Status" ZoneSourceName="NuvoControl/Zone12/SourceName" ZoneSourceSelection="NuvoControl/Zone12/SourceSelection" ZoneVolume="NuvoControl/Zone12/Volume" ZoneBass="NuvoControl/Zone12/Bass" ZoneTreble="NuvoControl/Zone12/Treble" ZoneKeyPadLock="NuvoControl/Zone12/KeyPadLock"/>
            </Zones>
            <Sources>
              <Source Id="1" SourceName="NuvoControl/Source1/SourceName" />
              <Source Id="2" SourceName="NuvoControl/Source2/SourceName" />
              <Source Id="3" SourceName="NuvoControl/Source3/SourceName" />
              <Source Id="4" SourceName="NuvoControl/Source4/SourceName" />
              <Source Id="5" SourceName="NuvoControl/Source5/SourceName" />
              <Source Id="6" SourceName="NuvoControl/Source6/SourceName" />
            </Sources>
          </OSCClient>
        </OSCDevices>
        <Zones>
          <Zone Id="1" Name="Esszimmer" />
          <Zone Id="2" Name="Büro (EG)" />
          <Zone Id="3" Name="Schlafzimmer" />
          <Zone Id="4" Name="Wohnzimmer" />
          <Zone Id="5" Name="Küche" />
          <Zone Id="6" Name="Dusche" />
          <Zone Id="7" Name="Bad/WC" />
          <Zone Id="8" Name="Gästezimmer" />
          <Zone Id="9" Name="Fernsehecke" />
          <Zone Id="10" Name="Büro (Dach)" />
          <Zone Id="11" Name="Balkon" />
          <Zone Id="12" Name="(unused)" />
        </Zones>
        <Sources>
          <Source Id="1" Name="DAB Hama" />
          <Source Id="2" Name="AppleAirport" />
          <Source Id="3" Name="CD Player" />
          <Source Id="4" Name="Pi1 USB2" />
          <Source Id="5" Name="Pi1 USB1" />
          <Source Id="6" Name="Pi1 on-board"/>
        </Sources>
      </Device>
    </Hardware>
    
    <Graphic>
      <Building Name="Unser Heim" Id="10000.1">
        <Picture RelativePath=".\Images\Building.png" PictureType="png"></Picture>
        <Floor Name="Wohnbereich" Id="1000.1">
          <FloorPlan RelativePath=".\Images\Wohnbereich.bmp" PictureType="bmp" />
          <Zones>
            <Zone Id="100.1" Name="Esszimmer">
              <Picture RelativePath=".\Images\Esszimmer.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="285" y="210" />
                <Point x="485" y="210" />
                <Point x="485" y="325" />
                <Point x="285" y="325" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="60" y="10" />
            </Zone>
            <Zone Id="100.2" Name="Büro (EG)">
              <Picture RelativePath=".\Images\BüroChristian.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="630" y="290" />
                <Point x="720" y="290" />
                <Point x="720" y="500" />
                <Point x="630" y="500" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="10" y="30" />
            </Zone>
            <Zone Id="100.3" Name="Schlafzimmer">
              <Picture RelativePath=".\Images\Schlafzimmer.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="515" y="60" />
                <Point x="720" y="60" />
                <Point x="720" y="220" />
                <Point x="515" y="220" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="60" y="40" />
            </Zone>
            <Zone Id="100.4" Name="Wohnzimmer">
              <Picture RelativePath=".\Images\Wohnzimmer.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="60" y="210" />
                <Point x="260" y="210" />
                <Point x="260" y="500" />
                <Point x="60" y="500" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="60" y="80" />
            </Zone>
            <Zone Id="100.5" Name="Küche">
              <Picture RelativePath=".\Images\Küche.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="240" y="60" />
                <Point x="380" y="60" />
                <Point x="380" y="185" />
                <Point x="240" y="185" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="40" y="20" />
            </Zone>
            <Zone Id="100.6" Name="Dusche">
              <Picture RelativePath=".\Images\Dusche.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="175" y="60" />
                <Point x="220" y="60" />
                <Point x="220" y="185" />
                <Point x="175" y="185" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="0" y="20" />
            </Zone>
            <Zone Id="100.7" Name="Bad/WC">
              <Picture RelativePath=".\Images\BadWC.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="400" y="60" />
                <Point x="490" y="60" />
                <Point x="490" y="185" />
                <Point x="400" y="185" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="10" y="20" />
            </Zone>
            <Zone Id="100.8" Name="Hasenzimmer">
              <Picture RelativePath=".\Images\Hasenzimmer.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="520" y="290" />
                <Point x="610" y="290" />
                <Point x="610" y="500" />
                <Point x="520" y="500" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="10" y="30" />
            </Zone>
            <Zone Id="100.11" Name="Balkon">
              <Picture RelativePath=".\Images\Balkon.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="285" y="360" />
                <Point x="485" y="360" />
                <Point x="485" y="500" />
                <Point x="285" y="500" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="60" y="20" />
            </Zone>
          </Zones>
        </Floor>
        <Floor Name="Galerie" Id="1000.2">
          <FloorPlan RelativePath=".\Images\Galerie.bmp" PictureType="bmp" />
          <Zones>
            <Zone Id="100.9" Name="Fernsehecke">
              <Picture RelativePath=".\Images\Fernsehecke.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="600" y="130" />
                <Point x="710" y="130" />
                <Point x="710" y="260" />
                <Point x="600" y="260" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="10" y="10" />
            </Zone>
            <Zone Id="100.10" Name="Büro (Dach)">
              <Picture RelativePath=".\Images\BüroAnita.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="740" y="120" />
                <Point x="1020" y="120" />
                <Point x="1020" y="290" />
                <Point x="740" y="290" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="10" y="10" />
            </Zone>
            <Zone Id="100.12" Name="Funk">
              <Picture RelativePath=".\Images\Funk.jpg" PictureType="jpg" />
              <FloorPlanCoordinates>
                <Point x="440" y="130" />
                <Point x="550" y="130" />
                <Point x="550" y="260" />
                <Point x="440" y="260" />
              </FloorPlanCoordinates>
              <ZoneControlCoordinate x="10" y="10" />
            </Zone>
          </Zones>
        </Floor>
      </Building>
      <Sources>
        <Source Id="100.1" Name="DAB Hama DIR3100">
          <Picture RelativePath=".\Images\Tuner.jpg" PictureType="jpg" />
        </Source>
        <Source Id="100.2" Name="DAB">
          <Picture RelativePath=".\Images\Tuner.jpg" PictureType="jpg" />
        </Source>
        <Source Id="100.3" Name="Logitec">
          <Picture RelativePath=".\Images\CDPlayer.jpg" PictureType="jpg" />
        </Source>
        <Source Id="100.4" Name="CD Player">
          <Picture RelativePath=".\Images\CDPlayer.jpg" PictureType="jpg" />
        </Source>
        <Source Id="100.5" Name="AppleAirport">
          <Picture RelativePath=".\Images\AppleAirport.jpg" PictureType="jpg" />
        </Source>
        <Source Id="100.6" Name="RaspberryPi 2">
          <Picture RelativePath=".\Images\MediaServer.jpg" PictureType="jpg" />
        </Source>
      </Sources>
    </Graphic>
    
    <Functions>

      <!-- Real Functions -->

      <!--
      
      <AlarmFunction Id="001" ZoneId="100.3" Volume="25" AlarmTime="06:45" AlarmDuration="120" SourceId="100.1">
        <Validity>
          <Days>
            <Day Name="Monday" />
          </Days>
        </Validity>
        <Commands>
          <Command cmd="PlaySound" SourceId="100.6" onFunctionStart="True" onFunctionEnd="True" Id="001-1"
                   url="http://stream.srg-ssr.ch/m/drs3/mp3_128"/>
        </Commands>
      </AlarmFunction>
      <AlarmFunction Id="002" ZoneId="100.3" Volume="25" AlarmTime="06:40" AlarmDuration="120" SourceId="100.1">
        <Validity>
          <Days>
            <Day Name="Tuesday" />
            <Day Name="Wednesday" />
            <Day Name="Thursday" />
            <Day Name="Friday" />
          </Days>
        </Validity>
        <Commands>
          <Command cmd="PlaySound" SourceId="100.6" onFunctionStart="True" onFunctionEnd="True" Id="002-1"
                   url="http://stream.srg-ssr.ch/m/drs3/mp3_128"/>
        </Commands>
      </AlarmFunction>

      <SleepFunction Id="003" ZoneId="100.3" SleepDuration="60">
        <Validity ActiveFrom="20:00" ActiveTo="02:00"></Validity>
        <Commands>
          <Command cmd="PlaySound" SourceId="100.6" onValidityStart="True" onValidityEnd="True" Id="003-1"
                   url="http://stream.srg-ssr.ch/m/drs1/mp3_128"/>
        </Commands>
      </SleepFunction>

      -->
      
      

      <!-- Test Functions -->
 
      <!--
      
      <SleepFunction Id="500" ZoneId="100.12" SleepDuration="60">
        <Validity ActiveFrom="23:15" ActiveTo="04:00"></Validity>
        <Commands>
          <Command cmd="SendMail" onFunctionError="True" onFunctionStart="True" onFunctionEnd="True" onValidityStart="True" onValidityEnd="True" Id="500-1">
            <Recipients>
              <Recipient name="christian@imfeld.net" type="to" />
            </Recipients>
            <Subject>
              SendMailCommand (Sleep Function): {OnFunction} Id={Command.Id} Machine={MachineName}.
            </Subject>
            <Body>
              SendMailCommand Body: {Command.Id} on Machine={MachineName} \nOS={OperatingSystem} \nFunction={Function} \n({DateTime.Now})
            </Body>
          </Command>
        </Commands>
      </SleepFunction>

      <SleepFunction Id="501" ZoneId="100.12" SleepDuration="5">
        <Validity ActiveFrom="14:00" ActiveTo="04:00"></Validity>
        <Commands>
          <Command cmd="SendMail" onFunctionError="True" onFunctionStart="True" onFunctionEnd="True" Id="501-1">
            <Recipients>
              <Recipient name="christian@imfeld.net" type="to" />
            </Recipients>
            <Subject>
              SendMailCommand (Sleep Function): {OnFunction} Id={Command.Id} Machine={MachineName}.
            </Subject>
            <Body>
              SendMailCommand Body: {Command.Id} on Machine={MachineName} \nOS={OperatingSystem} \nFunction={Function} \n({DateTime.Now})
            </Body>
          </Command>
          
          <Command cmd="PlaySound" SourceId="100.6" onValidityStart="True" onValidityEnd="True" Id="501-2" url="http://stream.srg-ssr.ch/m/drs3/mp3_128"/>
          <Command cmd="PlaySound" SourceId="100.5" onValidityStart="True" onValidityEnd="True" Id="501-3" url="http://stream.srg-ssr.ch/m/drs1/mp3_128"/>
          <Command cmd="StartProcess" onFunctionStart="True" onUnix="True" onWindows="False"  Id="501-4" process_cmd="/usr/bin/mpg321" process_arg="http://stream.srg-ssr.ch/m/drs3/mp3_128" />
          <Command cmd="SendNuvoCommand" onValidityStart="True" onFunctionStart="True" ZoneId="100.2" PowerStatus="ON" SourceId="100.1" Volume="25" Id="501-5" />

        </Commands>
      </SleepFunction>

      <ZoneChangeFunction  Id="502" ZoneId="100.12" SourceId="100.1" Volume="10" OnStatusChange="True" OnSourceChange="True" OnVolumeChange="False" >
        <Validity ActiveFrom="14:00" ActiveTo="04:00">
          <Days>
            <Day Name="Wednesday" />
          </Days>
        </Validity>
        <Commands>
          <Command cmd="PlaySound" SourceId="100.6" onFunctionStart="True" Id="502-1" url="http://stream.srg-ssr.ch/m/drs3/mp3_128"/>
          <Command cmd="PlaySound" SourceId="100.5" onFunctionStart="True" Id="502-2" url="http://stream.srg-ssr.ch/m/drs1/mp3_128"/>
          <Command cmd="StartProcess" onFunctionStart="True" onUnix="True" onWindows="False"  Id="502-3" process_cmd="/usr/bin/mpg321" process_arg="http://stream.srg-ssr.ch/m/drs3/mp3_128" />
        
          <Command cmd="SendNuvoCommand" onValidityStart="False" onFunctionStart="True" ZoneId="100.10" PowerStatus="ON" SourceId="100.3" Volume="22" Id="502-4" />
          <Command cmd="SendNuvoCommand" onValidityStart="True"  onFunctionStart="True" ZoneId="100.11" PowerStatus="OFF" SourceId="100.3" Volume="33" Id="502-5" />
        </Commands>
        
      </ZoneChangeFunction>

      <ZoneChangeFunction  Id="503" ZoneId="100.11" SourceId="100.1" Volume="10" OnStatusChange="True" OnSourceChange="True" OnVolumeChange="False" OnQualityChange="True" >
        <Validity>
          <Days>
            <Day Name="Tuesday" />
          </Days>
        </Validity>
      </ZoneChangeFunction>

      <OscEventFunction Id="504" OscDevice="100.1" OscEvent="Ping" OscLabel="/ping">
        <Validity>
          <Days>
            <Day Name="Wednesday" />
          </Days>
        </Validity>
        <Command cmd="SendNuvoCommand" onValidityStart="False" onFunctionStart="True" ZoneId="100.1" PowerStatus="ON" SourceId="100.3" Volume="22" Id="504-1" />
        <Command cmd="PlaySound" SourceId="100.6" onFunctionStart="True" url="http://stream.srg-ssr.ch/m/drs3/mp3_128"  Id="504-2" />
      </OscEventFunction>

      -->

      <OscEventFunction Id="505" OscDevice="100.1" OscEvent="SwitchOn" OscLabel="/4/toggle3">
        <Command cmd="SendNuvoCommand" onValidityStart="False" onFunctionStart="True" ZoneId="100.2" PowerStatus="ON" SourceId="100.3" Volume="22" Id="505-1" />
      </OscEventFunction>
      <OscEventFunction Id="506" OscDevice="100.1" OscEvent="SwitchOff" OscLabel="/4/toggle3">
        <Command cmd="SendNuvoCommand" onValidityStart="False" onFunctionStart="True" ZoneId="100.2" PowerStatus="OFF" SourceId="100.3" Volume="22" Id="506-1" />
      </OscEventFunction>
      <OscEventFunction Id="507" OscDevice="100.1" OscEvent="SetValue" OscLabel="/1/fader1" OscValue="50">
        <Command cmd="SendNuvoCommand" onValidityStart="False" onFunctionStart="True" ZoneId="100.1" PowerStatus="ON" SourceId="100.3" Volume="22" Id="507-1" />
      </OscEventFunction>
      <OscEventFunction Id="508" OscDevice="100.1" OscEvent="SetValue" OscLabel="/1/fader1" OscValue="100">
        <Command cmd="SendNuvoCommand" onValidityStart="False" onFunctionStart="True" ZoneId="100.1" PowerStatus="ON" SourceId="100.3" Volume="22" Id="508-1" />
      </OscEventFunction>

    </Functions>
  </Configuration>
</NuvoControl>